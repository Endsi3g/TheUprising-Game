# The Uprising Game — Full Audit Remediation

## Phase 1: Security Hardening (Critical) ✅
- [x] 1.1 Create server-side auth middleware ([requireAuth](file:///c:/The-Uprising-Game/TheUprising-Game/src/lib/auth-middleware.ts#47-92), [requireAdmin](file:///c:/The-Uprising-Game/TheUprising-Game/src/lib/auth-middleware.ts#93-115))
- [x] 1.2 Protect admin API routes with admin role check
- [x] 1.3 Add auth to `/api/admin/leads/csv`
- [x] 1.4 Secure report routes (`/api/report/[id]`)
- [x] 1.5 Add rate limiting middleware for LLM/TTS/Whisper endpoints
- [x] 1.6 SSRF guard for crawler URL validation
- [x] 1.7 Fix RLS policies (tenant-scoped)
- [x] 1.8 Redact sensitive data from logs (voice/speak)
- [x] 1.9 Fix temp file cleanup (voice/transcribe)
- [x] 1.10 Add Zod validation to `/api/chat` route

## Phase 2: UX/UI Fixes (Audit Report Issues)
- [/] 2.1 Fix spinner in NicheSelector "Services à domicile" button
- [/] 2.2 Add selected state to NicheSelector
- [/] 2.3 Fix disabled button styling for "Continuer"
- [/] 2.4 Add IA response loading indicator ("Génération de la réponse...")
- [/] 2.5 Add tooltips to icons in conversation panel
- [/] 2.6 Differentiate startup mode from audit mode

## Phase 3: Missing Pages — Auth & Core

- [ ] 3.1 Auth pages: `/auth/login`, `/auth/register`, `/auth/forgot-password`
- [ ] 3.2 Admin login page: `/admin/login`
- [ ] 3.3 Dashboard partenaire: `/dashboard`
- [ ] 3.4 Profile & settings pages

## Phase 4: Missing Pages — Business Features

- [ ] 4.1 Portfolio detail page (`/portfolio/[slug]`)
- [ ] 4.2 Finances section (overview, invoices, commissions)
- [ ] 4.3 Resources library
- [ ] 4.4 Messaging center
- [ ] 4.5 Leads management

## Phase 5: Legal & Compliance

- [ ] 5.1 Legal pages: terms, privacy, cookies
- [ ] 5.2 Cookie consent banner

## Verification

- [ ] Build verification (no TypeScript errors)
- [ ] Browser testing of security and UX fixes
